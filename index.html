<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Make GB, GBC and GBA screenshots look closer to the real thing">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="img/favicon.png">
        <link rel="stylesheet" href="css/pico.min.css">
        <title>DisplayBoy</title>
        <style>
.invisible {
    display:none;
}
#fileOutput {
    display: block;
    margin-left: auto;
    margin-right: auto;
}
        </style>
        <script type = "text/javascript">
            function updateForm(index) {
                var miscParamsClass = document.getElementById('miscParams').classList;
                var gbCustomFormClass = document.getElementById('gbCustomForm').classList;

                if (index <= 2)  {
                    miscParamsClass.add('invisible');
                } else {
                    miscParamsClass.remove('invisible');
                }
                if (index != 2)  {
                    gbCustomFormClass.add('invisible');
                } else {
                    gbCustomFormClass.remove('invisible');
                }
            }
        </script>
    </head>
    <body>
        <main class="container">
            <nav style="float:right">
                <ul>
                    <li><a href="https://github.com/coding-fish-1989/DisplayBoy" target="_blank">GitHub</a></li>
                    <li><a href="https://github.com/coding-fish-1989/DisplayBoy/blob/main/ATTRIBUTIONS.md" target="_blank">Attributions</a></li>
                </ul>
            </nav>
            <picture>
                <source srcset="img/db_logo_dark.png" media="(prefers-color-scheme: dark)">
                <img src="img/db_logo.png" alt="DisplayBoy Logo" style="width: 490px; margin-bottom: 20pt; margin-left: -5px">
            </picture>
            <fieldset>
                <label for="colorMode">Color Mode
                    <select id="colorMode" name="colorMode" oninput="updateForm(this.selectedIndex)">
                        <option value="gb">GB</option>
                        <option value="gbp">GBP</option>
                        <option value="gbCustom">GB Custom</option>
                        <option value="gbc">GBC</option>
                        <option value="gba">GBA</option>
                        <option value="gbaSp">GBA SP</option>
                        <option value="gbaSpWhite">GBA SP White</option>
                    </select>
                </label>
                <div id="gbCustomForm" class="grid invisible">
                    <div>
                        <label for="gbCustomBg">Background Color
                            <input type="color" id="gbCustomBg" name="gbCustomBg" value="#aab513" />
                        </label>
                    </div>
                    <div>
                        <label for="gbCustomBg">Foreground Color
                            <input type="color" id="gbCustomFg" name="gbCustomFg" value="#134a07" />
                        </label>
                        <output style="float:right">100</output>
                        <label for="gbCustomFgOpacity">Opacity
                            <input id="gbCustomFgOpacity" name="gbCustomFgOpacity" type="range" min="0" max="100" value="100" oninput="this.parentElement.previousElementSibling.value = this.value">
                        </label>
                    </div>
                </div>
                <div id="miscParams" class="invisible">
                    <label for="lcdMode">LCD Mode
                        <select id="lcdMode" name="lcdMode">
                            <option value="sameboy">Sameboy</option>
                            <option value="lcdv2">LCD Grid v2</option>
                            <option value="off">Off</option>
                        </select>
                    </label>
                    <output id="scaling-value" style="float:right">5</output>
                    <label for="scaling">Scale
                        <input id="scaling" name="scaling" type="range" min="1" max="8" value="5" oninput="this.parentElement.previousElementSibling.value = this.value">
                    </label>
                </div>

                <input type="file" id="fileInput">
                <button type="button" id="convertButton">Go</button>
                <small id="convError" style="color:red"></small>
            </fieldset>
            <img id="fileOutput" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="Filtered Image">
        </main>
        <script src="./wasm_exec.js"></script>
        <script>
            const go = new Go();
            WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
                go.run(result.instance);
            });
        </script>
    </body>
</html>
